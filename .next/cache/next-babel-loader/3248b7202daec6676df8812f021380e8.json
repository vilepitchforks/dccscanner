{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/angelovski/Documents/Projects/dccscanner/web/src/components/Scans/Scans.js\";\nimport { useEffect, useState } from \"react\";\nimport { useStoreState } from \"easy-peasy\";\nimport css from \"./Scans.module.css\";\nimport ScanThumb from \"../ScanThumb/ScanThumb.js\";\nimport ModalBackground from \"../ModalBackground/ModalBackground\";\nimport { chunkify } from \"../../lib/helpers/arrayHelpers\";\nimport ScanData from \"../ScanData/ScanData\";\n\nconst Scans = () => {\n  const {\n    0: metaArray,\n    1: setMetaArray\n  } = useState([]);\n  const {\n    0: showModal,\n    1: setShowModal\n  } = useState(false);\n  const {\n    0: selectedWeb,\n    1: setsSlectedWeb\n  } = useState(\"\");\n  const {\n    scanUrl,\n    db\n  } = useStoreState(state => state);\n  const scanRows = chunkify(metaArray);\n  useEffect(() => {\n    (async () => {\n      // Get metadata for all locally stored website scans for initial render\n      const websites = Object.keys(db).length ? await db.col(\"metadata\").findAsArray() : [];\n      setMetaArray(websites);\n    })(); // Re-fetch meta from local db after each new website has beem added\n\n  }, [scanUrl, db]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [scanRows.map((row, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: css[\"scans-row\"] + \" row\",\n      children: row.map((thumbnail, i) => /*#__PURE__*/_jsxDEV(ScanThumb, {\n        thumbnail: thumbnail,\n        setShowModal: setShowModal,\n        setsSlectedWeb: setsSlectedWeb,\n        setMetaArray: setMetaArray\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this))\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this)), showModal && /*#__PURE__*/_jsxDEV(ModalBackground, {\n      trigger: setShowModal,\n      children: /*#__PURE__*/_jsxDEV(ScanData, {\n        selectedWeb: selectedWeb\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\nexport default Scans;","map":{"version":3,"sources":["/home/angelovski/Documents/Projects/dccscanner/web/src/components/Scans/Scans.js"],"names":["useEffect","useState","useStoreState","css","ScanThumb","ModalBackground","chunkify","ScanData","Scans","metaArray","setMetaArray","showModal","setShowModal","selectedWeb","setsSlectedWeb","scanUrl","db","state","scanRows","websites","Object","keys","length","col","findAsArray","map","row","i","thumbnail"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,aAAT,QAA8B,YAA9B;AAEA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,eAAP,MAA4B,oCAA5B;AAEA,SAASC,QAAT,QAAyB,gCAAzB;AACA,OAAOC,QAAP,MAAqB,sBAArB;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4BT,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM;AAAA,OAACU,SAAD;AAAA,OAAYC;AAAZ,MAA4BX,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACY,WAAD;AAAA,OAAcC;AAAd,MAAgCb,QAAQ,CAAC,EAAD,CAA9C;AAEA,QAAM;AAAEc,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAkBd,aAAa,CAACe,KAAK,IAAIA,KAAV,CAArC;AAEA,QAAMC,QAAQ,GAAGZ,QAAQ,CAACG,SAAD,CAAzB;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAY;AACX;AACA,YAAMmB,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYL,EAAZ,EAAgBM,MAAhB,GACb,MAAMN,EAAE,CAACO,GAAH,CAAO,UAAP,EAAmBC,WAAnB,EADO,GAEb,EAFJ;AAIAd,MAAAA,YAAY,CAACS,QAAD,CAAZ;AACD,KAPD,IADc,CASd;;AACD,GAVQ,EAUN,CAACJ,OAAD,EAAUC,EAAV,CAVM,CAAT;AAYA,sBACE;AAAA,eACGE,QAAQ,CAACO,GAAT,CAAa,CAACC,GAAD,EAAMC,CAAN,kBACZ;AAAa,MAAA,SAAS,EAAExB,GAAG,CAAC,WAAD,CAAH,GAAmB,MAA3C;AAAA,gBACGuB,GAAG,CAACD,GAAJ,CAAQ,CAACG,SAAD,EAAYD,CAAZ,kBACP,QAAC,SAAD;AAEE,QAAA,SAAS,EAAEC,SAFb;AAGE,QAAA,YAAY,EAAEhB,YAHhB;AAIE,QAAA,cAAc,EAAEE,cAJlB;AAKE,QAAA,YAAY,EAAEJ;AALhB,SACOiB,CADP;AAAA;AAAA;AAAA;AAAA,cADD;AADH,OAAUA,CAAV;AAAA;AAAA;AAAA;AAAA,YADD,CADH,EAcGhB,SAAS,iBACR,QAAC,eAAD;AAAiB,MAAA,OAAO,EAAEC,YAA1B;AAAA,6BACE,QAAC,QAAD;AAAU,QAAA,WAAW,EAAEC;AAAvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAfJ;AAAA,kBADF;AAsBD,CA3CD;;AA6CA,eAAeL,KAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useStoreState } from \"easy-peasy\";\n\nimport css from \"./Scans.module.css\";\n\nimport ScanThumb from \"../ScanThumb/ScanThumb.js\";\nimport ModalBackground from \"../ModalBackground/ModalBackground\";\n\nimport { chunkify } from \"../../lib/helpers/arrayHelpers\";\nimport ScanData from \"../ScanData/ScanData\";\n\nconst Scans = () => {\n  const [metaArray, setMetaArray] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedWeb, setsSlectedWeb] = useState(\"\");\n\n  const { scanUrl, db } = useStoreState(state => state);\n\n  const scanRows = chunkify(metaArray);\n\n  useEffect(() => {\n    (async () => {\n      // Get metadata for all locally stored website scans for initial render\n      const websites = Object.keys(db).length\n        ? await db.col(\"metadata\").findAsArray()\n        : [];\n\n      setMetaArray(websites);\n    })();\n    // Re-fetch meta from local db after each new website has beem added\n  }, [scanUrl, db]);\n\n  return (\n    <>\n      {scanRows.map((row, i) => (\n        <div key={i} className={css[\"scans-row\"] + \" row\"}>\n          {row.map((thumbnail, i) => (\n            <ScanThumb\n              key={i}\n              thumbnail={thumbnail}\n              setShowModal={setShowModal}\n              setsSlectedWeb={setsSlectedWeb}\n              setMetaArray={setMetaArray}\n            />\n          ))}\n        </div>\n      ))}\n      {showModal && (\n        <ModalBackground trigger={setShowModal}>\n          <ScanData selectedWeb={selectedWeb} />\n        </ModalBackground>\n      )}\n    </>\n  );\n};\n\nexport default Scans;\n"]},"metadata":{},"sourceType":"module"}