{"ast":null,"code":"const makeDriver = ({\n  method,\n  endpoint,\n  format\n}) => async ({\n  email,\n  query,\n  body\n}) => {\n  try {\n    // Reset repeated additions of query to endpoint\n    endpoint = endpoint.split(\"?\")[0];\n    endpoint = query ? endpoint + \"?\" + query : endpoint;\n    const options = {\n      method,\n      credentials: \"same-origin\",\n      headers: {}\n    };\n    if (email) options.headers.Authorization = \"Basic \" + btoa(email);\n\n    if (body) {\n      options.headers[\"Content-Type\"] = \"application/json\";\n      options.body = JSON.stringify(body);\n    }\n\n    let status;\n    const result = await fetch(endpoint, options).then(res => {\n      status = res.status;\n      return res[format]();\n    });\n\n    if (status === 200 || status === 201) {\n      return result;\n    } else {\n      return false;\n    }\n  } catch (error) {\n    console.warn(\"driver err\", error);\n    return false;\n  }\n};\n\nexport const authDriver = makeDriver({\n  method: \"POST\",\n  endpoint: \"/api/auth\",\n  format: \"text\"\n});\nexport const slugDriver = makeDriver({\n  method: \"GET\",\n  endpoint: \"/api/slug\",\n  format: \"json\"\n});","map":null,"metadata":{},"sourceType":"module"}