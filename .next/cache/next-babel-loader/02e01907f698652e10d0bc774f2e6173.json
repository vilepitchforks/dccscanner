{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar makeDriver = function makeDriver(_ref) {\n  var method = _ref.method,\n      endpoint = _ref.endpoint,\n      format = _ref.format;\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var email, query, body, options, status, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              email = _ref2.email, query = _ref2.query, body = _ref2.body;\n              _context.prev = 1;\n              // Reset repeated additions of query to endpoint\n              endpoint = endpoint.split(\"?\")[0];\n              endpoint = query ? endpoint + \"?\" + query : endpoint;\n              options = {\n                method: method,\n                credentials: \"same-origin\",\n                headers: {}\n              };\n              if (email) options.headers.Authorization = \"Basic \" + btoa(email);\n              if (body) options.body = JSON.stringify(body);\n              _context.next = 9;\n              return fetch(endpoint, options).then(function (res) {\n                status = res.status;\n                return res[format]();\n              });\n\n            case 9:\n              result = _context.sent;\n\n              if (!(status === 200 || status === 201)) {\n                _context.next = 14;\n                break;\n              }\n\n              return _context.abrupt(\"return\", result);\n\n            case 14:\n              return _context.abrupt(\"return\", false);\n\n            case 15:\n              _context.next = 21;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](1);\n              console.warn(\"driver err\", _context.t0);\n              return _context.abrupt(\"return\", false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\n\nexport var authDriver = makeDriver({\n  method: \"POST\",\n  endpoint: \"/api/auth\",\n  format: \"text\"\n});\nexport var scanDriver = makeDriver({\n  method: \"GET\",\n  endpoint: \"/api/scan\",\n  format: \"json\"\n});\nexport var slugDriver = makeDriver({\n  method: \"GET\",\n  endpoint: \"/api/slug\",\n  format: \"json\"\n});","map":null,"metadata":{},"sourceType":"module"}