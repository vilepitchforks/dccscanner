{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\nimport Navbar from \"../components/Navbar/Navbar\";\nimport WebList from \"../components/WebList/WebList\";\nimport NewScan from \"../components/NewScan/NewScan\";\n\nconst Home = ({\n  user\n}) => {\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"DCC Scanner\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      })]\n    }), /*#__PURE__*/_jsx(Navbar, {\n      user: user\n    }), /*#__PURE__*/_jsx(WebList, {}), /*#__PURE__*/_jsx(NewScan, {})]\n  });\n};\n\nexport const getServerSideProps = async ctx => {\n  const dev = false; // Construct App URL for server side fetching\n\n  const protocol = dev ? \"http\" : \"https\";\n  const url = protocol + \"://\" + ctx.req.get(\"host\");\n\n  try {\n    // Check if user is authenticated\n    const {\n      data\n    } = await axios({\n      method: \"post\",\n      url: url + \"/api/auth\",\n      headers: ctx.req.headers\n    });\n    return {\n      props: {\n        user: data\n      }\n    };\n  } catch (error) {\n    console.warn(\"Error from Index.js: \", error.message); // If user is not authenticated, redirect to /login\n\n    if (error.response.status > 400 && ctx.req) ctx.res.writeHead(302, {\n      Location: url + \"/login\"\n    });\n    ctx.res.end();\n    return {\n      props: {\n        data: error.response.data\n      }\n    };\n  }\n};\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}