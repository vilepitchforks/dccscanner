{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useEffect, useState } from \"react\";\nimport Worksheet from \"../Worksheet/Worksheet\";\nimport { getStoresNames, getStoreData } from \"../../lib/helpers/processDb\";\nimport { createTableData } from \"../../lib/helpers/handleArr\";\n\nvar ScanData = function ScanData(_ref) {\n  var dbName = _ref.dbName;\n\n  var _useState = useState([]),\n      dates = _useState[0],\n      setDates = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var stores, rawDates;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getStoresNames(dbName);\n\n            case 2:\n              stores = _context.sent;\n              rawDates = Object.values(stores).filter(function (store) {\n                return store !== \"metadata\";\n              });\n              setDates(rawDates);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, []);\n\n  var handleGetStoreData = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dbName, date) {\n      var d, formattedDdata;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getStoreData(dbName, date);\n\n            case 2:\n              d = _context2.sent;\n              formattedDdata = d.ok && createTableData(d.data);\n              console.log(\"formattedDdata\", formattedDdata);\n              setData(formattedDdata);\n              console.log(\"data\", data);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleGetStoreData(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-987697359\" + \" \" + \"data-container\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-987697359\" + \" \" + \"data-head\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-987697359\" + \" \" + \"data-head-url\",\n          children: dbName\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-987697359\" + \" \" + \"data-head-element\",\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-987697359\",\n            children: \"Rest of the head section\"\n          }), /*#__PURE__*/_jsx(\"svg\", {\n            viewBox: \"0 0 24 24\",\n            className: \"jsx-987697359\" + \" \" + \"data-close-icon\",\n            children: /*#__PURE__*/_jsx(\"path\", {\n              d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\",\n              className: \"jsx-987697359\"\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-987697359\" + \" \" + \"data-body\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-987697359\" + \" \" + \"data-spreadsheet\",\n          children: /*#__PURE__*/_jsx(Worksheet, {\n            data: data\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-987697359\" + \" \" + \"data-dates\",\n          children: dates.map(function (date, i) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              onClick: function onClick() {\n                return handleGetStoreData(dbName, date);\n              },\n              className: \"jsx-987697359\",\n              children: date\n            }, i);\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"987697359\",\n      children: [\".data-container.jsx-987697359{background:red;margin:20px;height:calc(100vh - 40px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}\", \".data-head.jsx-987697359{background:green;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \".data-head-url.jsx-987697359{background:darkmagenta;width:25rem;-webkit-flex:none;-ms-flex:none;flex:none;}\", \".data-head-element.jsx-987697359{background:darkorange;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}\", \".data-body.jsx-987697359{background:blue;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:hidden;}\", \".data-spreadsheet.jsx-987697359{background:coral;overflow-y:auto;}\", \".data-dates.jsx-987697359{background:blueviolet;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \".data-close-icon.jsx-987697359{width:15px;}\"]\n    })]\n  });\n};\n\nexport default ScanData;","map":null,"metadata":{},"sourceType":"module"}