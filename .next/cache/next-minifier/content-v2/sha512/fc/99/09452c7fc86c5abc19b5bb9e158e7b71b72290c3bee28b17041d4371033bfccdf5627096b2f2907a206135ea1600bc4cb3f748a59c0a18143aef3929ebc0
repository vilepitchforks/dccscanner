{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{0:function(t,e,n){n(\"GcxT\"),t.exports=n(\"nOHt\")},GcxT:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/_app\",function(){return n(\"IlR1\")}])},IlR1:function(t,e,n){\"use strict\";n.r(e);var r=n(\"rePB\"),c=n(\"nKUr\"),o=n(\"S9FO\"),a=(n(\"zlK1\"),n(\"xXxE\"),n(\"rMck\"),n(\"ZJU2\"),n(\"o0o1\")),s=n.n(a),i=n(\"HaE+\"),u=n(\"1OyB\"),f=n(\"vuIU\"),d=n(\"4BP2\"),l=n.n(d),p=function(){function t(){Object(u.a)(this,t);var e=new l.a.Db(\"dcc\",{metadata:[\"scannedUrl\"],dccdata:[\"url\",\"timestamp\"]});e.open(),e.on(\"blocked\",(function(){console.warn(\"database version cannot be upgraded\")})),this.db=e,this.colLabel=\"\"}return Object(f.a)(t,[{key:\"col\",value:function(t){return this.colLabel=t,this}},{key:\"collection\",value:function(t){return this.db.collection(t)}},{key:\"findAsArray\",value:function(){var t=Object(i.a)(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.collection(this.colLabel).find(e,n).toArray();case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:\"remove\",value:function(){var t=Object(i.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.db.collection(\"metadata\").remove({scannedUrl:e}),this.db.collection(\"dccdata\").remove({url:e})]);case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var v=function(t,e){var n=e.url,c=e.data,o=e.timestamp;Object.keys(c).length>3&&t.dataEvents.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({url:n,timestamp:o},c))},O=function(){var t=Object(i.a)(s.a.mark((function t(e,n){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new EventSource(\"/api/stream?\"+n,{withCredentials:!0}),c=(new Date).getTime(),r.onopen=function(){e.addInfoEvent(\"Connection with server established.\"),e.setScanInProgress(!0)},r.addEventListener(\"info\",(function(t){var n=t.data;e.addInfoEvent(JSON.parse(n))})),r.addEventListener(\"data\",(function(t){var n=t.lastEventId,r=t.data;e.addDataEvent({url:n,data:JSON.parse(r),timestamp:c})})),r.addEventListener(\"close\",(function(t){e.addInfoEvent(\"Connection with server closed.\"),e.addInfoEvent(\"Processing scan data...\"),e.setScanInProgress(!1),r.close()})),r.addEventListener(\"servererror\",(function(t){var n=t.lastEventId,c=t.data;console.log(\"Servererror event lastEventId\",n),console.log(\"Servererror event data\",c),e.addErrorEvent(\"An error occurred: \"+c),e.setScanInProgress(!1),r.close()})),r.onerror=function(t){console.warn(\"Actual error event\",t),e.addErrorEvent(\"An es.onerror occurred\"),e.setScanInProgress(!1),r.close()};case 8:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),j=function(){var t=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new p,e.setDb(n);case 2:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=Object(o.createStore)({scanUrl:\"\",scanCtgs:\"\",scanInProgress:!1,metadata:{},infoEvents:[],dataEvents:[],errorEvents:[],db:{},setScanUrl:Object(o.action)((function(t,e){return function(t,e){t.scanUrl=e}(t,e)})),setScanCtgs:Object(o.action)((function(t,e){return function(t,e){t.scanCtgs=e}(t,e)})),setScanInProgress:Object(o.action)((function(t,e){return function(t,e){t.scanInProgress=e}(t,e)})),setMetadata:Object(o.action)((function(t,e){return function(t,e){t.metadata=e}(t,e)})),reSetScanUrl:Object(o.action)((function(t){return function(t){t.scanUrl=\"\",t.scanCtgs=\"\",t.metadata={},t.infoEvents=[],t.dataEvents=[],t.errorEvents=[]}(t)})),addInfoEvent:Object(o.action)((function(t,e){!function(t,e){t.infoEvents.push(e)}(t,e)})),addDataEvent:Object(o.action)((function(t,e){v(t,e)})),addErrorEvent:Object(o.action)((function(t,e){!function(t,e){t.errorEvents.push(e)}(t,e)})),startStream:Object(o.thunk)((function(t,e){return O(t,e)})),setDb:Object(o.action)((function(t,e){return function(t,e){t.db=e}(t,e)})),initDb:Object(o.thunk)((function(t){return j(t)}))});function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.default=function(t){var e=t.Component,n=t.pageProps;return Object(c.jsx)(o.StoreProvider,{store:E,children:Object(c.jsx)(e,w({},n))})}},ZJU2:function(t,e,n){},rMck:function(t,e,n){},xXxE:function(t,e,n){},zlK1:function(t,e,n){}},[[0,0,2,1,3,4]]]);","map":{"version":3,"sources":["static/chunks/pages/_app-c866b6c06032d56a6370.js"],"names":["_N_E","window","push","0","module","exports","__webpack_require__","GcxT","__NEXT_P","IlR1","__webpack_exports__","r","defineProperty","jsx_runtime","easy_peasy","regenerator","regenerator_default","n","asyncToGenerator","classCallCheck","createClass","src","src_default","processDb_new_Model","Model","Object","this","db","a","Db","metadata","dccdata","open","on","console","warn","colLabel","key","value","collection","_collection","_findAsArray","mark","_callee","query","options","wrap","_context","prev","next","find","toArray","abrupt","sent","stop","_x","_x2","apply","arguments","_remove","_callee2","url","_context2","Promise","all","remove","scannedUrl","_x3","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","addDataEvent","state","_ref","data","timestamp","length","dataEvents","target","i","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread","startStream","_ref2","actions","es","EventSource","withCredentials","Date","getTime","onopen","addInfoEvent","setScanInProgress","addEventListener","_ref3","JSON","parse","_ref4","lastEventId","e","close","_ref5","log","addErrorEvent","onerror","err","initDb","_ref6","setDb","store_Store","scanUrl","scanCtgs","scanInProgress","infoEvents","errorEvents","setScanUrl","setScanCtgs","check","setMetadata","meta","reSetScanUrl","event","payload","_app_ownKeys","_app_objectSpread","Component","pageProps","store","children","ZJU2","rMck","xXxE","zlK1"],"mappings":"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"},"name":"static/chunks/pages/_app-c866b6c06032d56a6370.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[6],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"GcxT\");\nmodule.exports = __webpack_require__(\"nOHt\");\n\n\n/***/ }),\n\n/***/ \"GcxT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/_app\",\n      function () {\n        return __webpack_require__(\"IlR1\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"IlR1\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"rePB\");\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/easy-peasy/dist/easy-peasy.js\nvar easy_peasy = __webpack_require__(\"S9FO\");\n\n// EXTERNAL MODULE: ./src/styles/normalize.css\nvar normalize = __webpack_require__(\"zlK1\");\n\n// EXTERNAL MODULE: ./src/styles/skeleton.css\nvar skeleton = __webpack_require__(\"xXxE\");\n\n// EXTERNAL MODULE: ./src/styles/global.css\nvar global = __webpack_require__(\"rMck\");\n\n// EXTERNAL MODULE: ./node_modules/react-datasheet/lib/react-datasheet.css\nvar react_datasheet = __webpack_require__(\"ZJU2\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"HaE+\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(\"1OyB\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(\"vuIU\");\n\n// EXTERNAL MODULE: ./node_modules/zangodb/build/src/index.js\nvar src = __webpack_require__(\"4BP2\");\nvar src_default = /*#__PURE__*/__webpack_require__.n(src);\n\n// CONCATENATED MODULE: ./src/lib/helpers/processDb_new.js\n\n\n\n\n\nvar processDb_new_Model = /*#__PURE__*/function () {\n  function Model() {\n    Object(classCallCheck[\"a\" /* default */])(this, Model);\n\n    var db = new src_default.a.Db(\"dcc\", {\n      // sets the schema, scannedUrl and url are the same url sent by the user\n      metadata: [\"scannedUrl\"],\n      dccdata: [\"url\", \"timestamp\"]\n    });\n    db.open(); // creates the db and collections\n\n    db.on(\"blocked\", function () {\n      console.warn(\"database version cannot be upgraded\");\n    });\n    this.db = db;\n    this.colLabel = \"\";\n  }\n\n  Object(createClass[\"a\" /* default */])(Model, [{\n    key: \"col\",\n    value: function col(collection) {\n      // Used in conjuction with methods that return Cursor and need extra processing, for example db.find()\n      this.colLabel = collection;\n      return this;\n    }\n  }, {\n    key: \"collection\",\n    value: function collection(_collection) {\n      // Returns Collection on Model.db instance\n      return this.db.collection(_collection);\n    }\n  }, {\n    key: \"findAsArray\",\n    value: function () {\n      var _findAsArray = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee(query, options) {\n        return regenerator_default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.db.collection(this.colLabel).find(query, options).toArray();\n\n              case 2:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function findAsArray(_x, _x2) {\n        return _findAsArray.apply(this, arguments);\n      }\n\n      return findAsArray;\n    }()\n  }, {\n    key: \"remove\",\n    value: function () {\n      var _remove = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2(url) {\n        return regenerator_default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return Promise.all([this.db.collection(\"metadata\").remove({\n                  scannedUrl: url\n                }), this.db.collection(\"dccdata\").remove({\n                  url: url\n                })]);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function remove(_x3) {\n        return _remove.apply(this, arguments);\n      }\n\n      return remove;\n    }()\n  }]);\n\n  return Model;\n}();\n// CONCATENATED MODULE: ./src/lib/state/eventHandlers/eventHandlers.js\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\nvar setScanUrl = function setScanUrl(state, scanUrl) {\n  state.scanUrl = scanUrl;\n};\nvar setScanCtgs = function setScanCtgs(state, scanCtgs) {\n  state.scanCtgs = scanCtgs;\n};\nvar setScanInProgress = function setScanInProgress(state, check) {\n  state.scanInProgress = check;\n};\nvar setMetadata = function setMetadata(state, meta) {\n  state.metadata = meta;\n};\nvar reSetScanUrl = function reSetScanUrl(state) {\n  state.scanUrl = \"\";\n  state.scanCtgs = \"\";\n  state.metadata = {};\n  state.infoEvents = [];\n  state.dataEvents = [];\n  state.errorEvents = [];\n};\nvar addInfoEvent = function addInfoEvent(state, event) {\n  state.infoEvents.push(event);\n};\nvar addDataEvent = function addDataEvent(state, _ref) {\n  var url = _ref.url,\n      data = _ref.data,\n      timestamp = _ref.timestamp;\n  // Store valid DCC objects, with more than just url, scannedUrl and timestamp.\n  if (Object.keys(data).length > 3) state.dataEvents.push(_objectSpread({\n    url: url,\n    timestamp: timestamp\n  }, data));\n};\nvar addErrorEvent = function addErrorEvent(state, event) {\n  state.errorEvents.push(event);\n};\nvar startStream = /*#__PURE__*/function () {\n  var _ref2 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee(actions, query) {\n    var es, timestamp;\n    return regenerator_default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            es = new EventSource(\"/api/stream?\" + query, {\n              withCredentials: true\n            });\n            timestamp = new Date().getTime();\n\n            es.onopen = function () {\n              actions.addInfoEvent(\"Connection with server established.\");\n              actions.setScanInProgress(true);\n            };\n\n            es.addEventListener(\"info\", function (_ref3) {\n              var data = _ref3.data;\n              actions.addInfoEvent(JSON.parse(data));\n            });\n            es.addEventListener(\"data\", function (_ref4) {\n              var url = _ref4.lastEventId,\n                  data = _ref4.data;\n              actions.addDataEvent({\n                url: url,\n                data: JSON.parse(data),\n                timestamp: timestamp\n              });\n            });\n            es.addEventListener(\"close\", function (e) {\n              actions.addInfoEvent(\"Connection with server closed.\");\n              actions.addInfoEvent(\"Processing scan data...\");\n              actions.setScanInProgress(false);\n              es.close();\n            });\n            es.addEventListener(\"servererror\", function (_ref5) {\n              var url = _ref5.lastEventId,\n                  data = _ref5.data;\n              console.log(\"Servererror event lastEventId\", url);\n              console.log(\"Servererror event data\", data);\n              actions.addErrorEvent(\"An error occurred: \" + data);\n              actions.setScanInProgress(false);\n              es.close();\n            });\n\n            es.onerror = function (err) {\n              console.warn(\"Actual error event\", err);\n              actions.addErrorEvent(\"An es.onerror occurred\");\n              actions.setScanInProgress(false);\n              es.close();\n            };\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function startStream(_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar setDb = function setDb(state, db) {\n  state.db = db;\n};\nvar initDb = /*#__PURE__*/function () {\n  var _ref6 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2(actions) {\n    var db;\n    return regenerator_default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            db = new processDb_new_Model();\n            actions.setDb(db);\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function initDb(_x3) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n// CONCATENATED MODULE: ./src/lib/state/store/Store.js\n\n\nvar Store = Object(easy_peasy[\"createStore\"])({\n  scanUrl: \"\",\n  scanCtgs: \"\",\n  scanInProgress: false,\n  metadata: {},\n  infoEvents: [],\n  dataEvents: [],\n  errorEvents: [],\n  db: {},\n  setScanUrl: Object(easy_peasy[\"action\"])(function (state, scanUrl) {\n    return setScanUrl(state, scanUrl);\n  }),\n  setScanCtgs: Object(easy_peasy[\"action\"])(function (state, scanCtgs) {\n    return setScanCtgs(state, scanCtgs);\n  }),\n  setScanInProgress: Object(easy_peasy[\"action\"])(function (state, check) {\n    return setScanInProgress(state, check);\n  }),\n  setMetadata: Object(easy_peasy[\"action\"])(function (state, meta) {\n    return setMetadata(state, meta);\n  }),\n  reSetScanUrl: Object(easy_peasy[\"action\"])(function (state) {\n    return reSetScanUrl(state);\n  }),\n  addInfoEvent: Object(easy_peasy[\"action\"])(function (state, event) {\n    addInfoEvent(state, event);\n  }),\n  addDataEvent: Object(easy_peasy[\"action\"])(function (state, payload) {\n    addDataEvent(state, payload);\n  }),\n  addErrorEvent: Object(easy_peasy[\"action\"])(function (state, event) {\n    addErrorEvent(state, event);\n  }),\n  startStream: Object(easy_peasy[\"thunk\"])(function (actions, query) {\n    return startStream(actions, query);\n  }),\n  setDb: Object(easy_peasy[\"action\"])(function (state, db) {\n    return setDb(state, db);\n  }),\n  initDb: Object(easy_peasy[\"thunk\"])(function (actions) {\n    return initDb(actions);\n  })\n});\n/* harmony default export */ var store_Store = (Store);\n// CONCATENATED MODULE: ./src/pages/_app.js\n\n\n\nfunction _app_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _app_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { _app_ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { _app_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\nfunction MyApp(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(easy_peasy[\"StoreProvider\"], {\n    store: store_Store,\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component, _app_objectSpread({}, pageProps))\n  });\n}\n\n/* harmony default export */ var _app = __webpack_exports__[\"default\"] = (MyApp);\n\n/***/ }),\n\n/***/ \"ZJU2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ \"rMck\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ \"xXxE\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ \"zlK1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n},[[0,0,2,1,3,4]]]);"}