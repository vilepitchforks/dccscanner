{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{\"20a2\":function(t,e,n){t.exports=n(\"nOHt\")},SGa5:function(t,e,n){\"use strict\";n.r(e);var r=n(\"o0o1\"),a=n.n(r);function i(t,e,n,r,a,i,u){try{var o=t[i](u),c=o.value}catch(s){return void n(s)}o.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var u=t.apply(e,n);function o(t){i(u,r,a,o,c,\"next\",t)}function c(t){i(u,r,a,o,c,\"throw\",t)}o(void 0)}))}}var o=n(\"nKUr\"),c=n(\"20a2\"),s=n.n(c),d=n(\"q1tI\"),p=function(t){var e=t.method,n=t.endpoint,r=t.format;return function(){var t=u(a.a.mark((function t(i){var u,o,c,s,d,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=i.email,o=i.query,c=i.body,t.prev=1,n=n.split(\"?\")[0],n=o?n+\"?\"+o:n,s={method:e,credentials:\"same-origin\",headers:{}},u&&(s.headers.Authorization=\"Basic \"+btoa(u)),c&&(s.body=JSON.stringify(c)),t.next=9,fetch(n,s).then((function(t){return d=t.status,t[r]()}));case 9:if(p=t.sent,200!==d&&201!==d){t.next=14;break}return t.abrupt(\"return\",p);case 14:return t.abrupt(\"return\",!1);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(1),console.warn(\"driver err\",t.t0),t.abrupt(\"return\",!1);case 21:case\"end\":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()},f=p({method:\"POST\",endpoint:\"/api/auth\",format:\"text\"});p({method:\"GET\",endpoint:\"/api/scan\",format:\"json\"}),p({method:\"GET\",endpoint:\"/api/slug\",format:\"json\"}),e.default=function(){var t=Object(d.useState)(\"\"),e=t[0],n=t[1],r=Object(d.useState)(\"\"),i=r[0],c=r[1],p=function(){var t=u(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c(\"\"),t.next=4,f({email:e});case 4:t.sent?s.a.replace(\"/\"):c(\"Invalid credentials\");case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsx)(\"form\",{onSubmit:p,children:Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(\"div\",{children:Object(o.jsx)(\"div\",{children:\"@\"})}),Object(o.jsx)(\"input\",{required:!0,name:\"email\",type:\"email\",placeholder:\"Email\",onInput:function(t){return n(t.target.value)}}),Object(o.jsx)(\"div\",{children:Object(o.jsx)(\"button\",{type:\"submit\",children:\"Enter\"})}),Object(o.jsx)(\"div\",{children:i})]})})}},u6Hu:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/login\",function(){return n(\"SGa5\")}])}},[[\"u6Hu\",0,1,2]]]);","map":{"version":3,"sources":["static/chunks/pages/login-0dc2cf244aec875c6e9d.js"],"names":["_N_E","window","push","20a2","module","exports","__webpack_require__","SGa5","__webpack_exports__","r","regenerator","regenerator_default","n","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","jsx_runtime","router","router_default","react","restDrivers_makeDriver","_ref","method","endpoint","format","_ref3","a","mark","_callee","_ref2","email","query","body","options","status","result","wrap","_context","prev","next","split","credentials","headers","Authorization","btoa","JSON","stringify","fetch","res","sent","abrupt","t0","console","warn","stop","_x","authDriver","_useState","Object","setEmail","_useState2","check","setCheck","handleSubmit","e","preventDefault","replace","onSubmit","children","required","name","type","placeholder","onInput","target","u6Hu","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/login-0dc2cf244aec875c6e9d.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[7],{\n\n/***/ \"20a2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"nOHt\")\n\n\n/***/ }),\n\n/***/ \"SGa5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar router = __webpack_require__(\"20a2\");\nvar router_default = /*#__PURE__*/__webpack_require__.n(router);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// CONCATENATED MODULE: ./src/lib/drivers/restDrivers.js\n\n\n\nvar restDrivers_makeDriver = function makeDriver(_ref) {\n  var method = _ref.method,\n      endpoint = _ref.endpoint,\n      format = _ref.format;\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/regenerator_default.a.mark(function _callee(_ref2) {\n      var email, query, body, options, status, result;\n      return regenerator_default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              email = _ref2.email, query = _ref2.query, body = _ref2.body;\n              _context.prev = 1;\n              // Reset repeated additions of query to endpoint\n              endpoint = endpoint.split(\"?\")[0];\n              endpoint = query ? endpoint + \"?\" + query : endpoint;\n              options = {\n                method: method,\n                credentials: \"same-origin\",\n                headers: {}\n              };\n              if (email) options.headers.Authorization = \"Basic \" + btoa(email);\n              if (body) options.body = JSON.stringify(body);\n              _context.next = 9;\n              return fetch(endpoint, options).then(function (res) {\n                status = res.status;\n                return res[format]();\n              });\n\n            case 9:\n              result = _context.sent;\n\n              if (!(status === 200 || status === 201)) {\n                _context.next = 14;\n                break;\n              }\n\n              return _context.abrupt(\"return\", result);\n\n            case 14:\n              return _context.abrupt(\"return\", false);\n\n            case 15:\n              _context.next = 21;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](1);\n              console.warn(\"driver err\", _context.t0);\n              return _context.abrupt(\"return\", false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\n\nvar authDriver = restDrivers_makeDriver({\n  method: \"POST\",\n  endpoint: \"/api/auth\",\n  format: \"text\"\n});\nvar scanDriver = restDrivers_makeDriver({\n  method: \"GET\",\n  endpoint: \"/api/scan\",\n  format: \"json\"\n});\nvar slugDriver = restDrivers_makeDriver({\n  method: \"GET\",\n  endpoint: \"/api/slug\",\n  format: \"json\"\n});\n// CONCATENATED MODULE: ./src/pages/login.js\n\n\n\n\n\n\n\n\nvar login_login = function login() {\n  var _useState = Object(react[\"useState\"])(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = Object(react[\"useState\"])(\"\"),\n      check = _useState2[0],\n      setCheck = _useState2[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regenerator_default.a.mark(function _callee(e) {\n      var auth;\n      return regenerator_default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setCheck(\"\");\n              _context.next = 4;\n              return authDriver({\n                email: email\n              });\n\n            case 4:\n              auth = _context.sent;\n\n              if (auth) {\n                // Redirect to \"/\" after successfull login\n                router_default.a.replace(\"/\");\n              } else {\n                setCheck(\"Invalid credentials\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\", {\n    onSubmit: handleSubmit,\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          children: \"@\"\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n        required: true,\n        name: \"email\",\n        type: \"email\",\n        placeholder: \"Email\",\n        onInput: function onInput(e) {\n          return setEmail(e.target.value);\n        }\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          type: \"submit\",\n          children: \"Enter\"\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: check\n      })]\n    })\n  });\n};\n\n/* harmony default export */ var pages_login = __webpack_exports__[\"default\"] = (login_login);\n\n/***/ }),\n\n/***/ \"u6Hu\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/login\",\n      function () {\n        return __webpack_require__(\"SGa5\");\n      }\n    ]);\n  \n\n/***/ })\n\n},[[\"u6Hu\",0,1,2]]]);"}